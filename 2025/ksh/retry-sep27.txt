function triggerBatchJob
{
  log "Start to trigger the Batch job"
  MAX_RETRY=3
  RETRY_COUNT=0
  SLEEP_TIME=10   # 每次重试前等待 10 秒

  while (( RETRY_COUNT < MAX_RETRY ))
  do
      # 执行 curl
      RESULT=`curl -k --connect-timeout 20 --max-time 3600 -s ${CURL_PATTERN_TEMPLATE}`
      log "Result:${RESULT}"

      # 检查结果
      if echo "${RESULT}" | grep -q "xxx"; then
          log "Detected error 'xxx' in result, will retry... ($((RETRY_COUNT+1))/${MAX_RETRY})"
          RETRY_COUNT=$((RETRY_COUNT+1))
          sleep ${SLEEP_TIME}
      else
          # 没有遇到错误，直接退出循环
          break
      fi
  done

  # 如果多次重试后依然失败
  if (( RETRY_COUNT == MAX_RETRY )); then
      log "Batch job failed after ${MAX_RETRY} retries due to 'xxx' error"
  fi
}

