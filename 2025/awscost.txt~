ä¸€ã€ç¡®è®¤æ¶ˆè´¹æ¥æº

1.è¿›å…¥ AWS æ§åˆ¶å° â†’ Billing â†’ Cost Explorer

è®¾ç½®æ—¶é—´èŒƒå›´ï¼šåªçœ‹ å‘¨å…­é‚£ä¸€å¤©ï¼ˆDay level granularityï¼‰ã€‚

æŒ‰ Service æŸ¥çœ‹ï¼šå“ªä¸ªæœåŠ¡çªç„¶å¢åŠ ï¼ˆå¸¸è§ï¼šEC2ã€Data Transferã€S3ã€CloudFrontã€RDSã€Redshiftã€Athena ç­‰ï¼‰ã€‚

å† drill down åˆ° Usage Typeï¼Œç¡®è®¤æ˜¯ â€œæŒ‰å°æ—¶è®¡è´¹â€ è¿˜æ˜¯ â€œæµé‡/å­˜å‚¨â€ äº§ç”Ÿçš„è´¹ç”¨ã€‚

2.AWS Cost Anomaly Detection

å¦‚æœä½ ä¹‹å‰æ²¡å¼€ï¼Œå¯ä»¥ç°åœ¨å¯ç”¨ï¼Œå¸®ä½ å‘ç°æ˜¯ä¸æ˜¯å¼‚å¸¸ spikeã€‚

äºŒã€å¸¸è§å¯¼è‡´è´¹ç”¨é£™å‡çš„åœºæ™¯

EC2

ä¸å°å¿ƒå¼€äº†å¾ˆå¤šå¤§å®ä¾‹ï¼ˆp3ã€p4ã€m6ã€r7 ç­‰é«˜ä»·æœºå™¨ï¼‰ã€‚

Spot â†’ æŒ‰éœ€åˆ‡æ¢å¯¼è‡´é«˜é¢ã€‚

Data Transfer

å‡ºç«™æµé‡ï¼ˆç‰¹åˆ«æ˜¯ è·¨åŒºæµé‡ã€å…¬ç½‘å‡ºå£æµé‡ï¼‰çªç„¶å¾ˆé«˜ã€‚

S3

å¤§é‡ PUT/GET è¯·æ±‚ï¼ˆAPI æ»¥ç”¨ã€è„šæœ¬å¼‚å¸¸ï¼‰ã€‚

Glacier retrievalï¼ˆå¤§è§„æ¨¡æ•°æ®å–å›ï¼‰ã€‚

CloudFront

æµé‡æš´æ¶¨ï¼ˆå¯èƒ½æ˜¯ DDoS æˆ–æœåŠ¡è®¿é—®é‡å¼‚å¸¸ï¼‰ã€‚

EKS / Lambda

å¼‚å¸¸è°ƒç”¨æ¬¡æ•°æ¿€å¢ã€‚

ç¬¬ä¸‰æ–¹ Marketplace

ä¸å°å¿ƒè®¢é˜…äº†æ˜‚è´µçš„ SaaS/AMIã€‚

ä¸‰ã€å®‰å…¨æ£€æŸ¥

IAM â†’ Access Advisor

æŸ¥çœ‹å‘¨å…­æœ‰æ²¡æœ‰ API è¢«å¼‚å¸¸è°ƒç”¨ã€‚

CloudTrail Logs

è¿‡æ»¤å‘¨å…­æ—¶é—´ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰äººå¯åŠ¨äº†å¤§é‡å®ä¾‹ / å¯¼å‡ºæ•°æ®ã€‚

GuardDuty

çœ‹çœ‹æœ‰æ²¡æœ‰å®‰å…¨è­¦æŠ¥ï¼ˆæŒ–çŸ¿ / æœªæˆæƒè®¿é—®ï¼‰ã€‚

ä¸€ä¸ª AWS CLI å‘½ä»¤ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨æœ¬åœ°æˆ–è€… CloudShell é‡Œè¿è¡Œï¼Œå¿«é€Ÿå®šä½å‘¨å…­å“ªä¸ªæœåŠ¡çš„è´¹ç”¨æœ€é«˜ã€‚

aws ce get-cost-and-usage \
  --time-period Start=2025-09-06,End=2025-09-07 \
  --granularity=DAILY \
  --metrics "UnblendedCost" \
  --group-by Type=DIMENSION,Key=SERVICE


è¿™ä¸ªå‘½ä»¤ä¼šè¿”å› JSONï¼Œé‡Œé¢ä¼šæ˜¾ç¤ºå„ä¸ª AWS Service çš„è´¹ç”¨ï¼Œæ¯”å¦‚ï¼š

{
  "ResultsByTime": [
    {
      "TimePeriod": {
        "Start": "2025-09-06",
        "End": "2025-09-07"
      },
      "Groups": [
        {
          "Keys": ["Amazon Elastic Compute Cloud - Compute"],
          "Metrics": {"UnblendedCost": {"Amount": "550.00", "Unit": "USD"}}
        },
        {
          "Keys": ["Amazon Simple Storage Service"],
          "Metrics": {"UnblendedCost": {"Amount": "200.00", "Unit": "USD"}}
        }
      ]
    }
  ]
}


ğŸ‘Œ é‚£æˆ‘ç»™ä½ ä¸€ä¸ªç®€å•çš„ bash è„šæœ¬ï¼Œç”¨ AWS CLI æŠŠå‘¨å…­çš„è´¹ç”¨ Top 5 æœåŠ¡/ç”¨é‡ç±»å‹æ‰“å°å‡ºæ¥ï¼Œæ–¹ä¾¿æ’æŸ¥ï¼š

#!/bin/bash
# check_cost.sh
# ç”¨æ³•: ./check_cost.sh 2025-09-06 2025-09-07
# Start=å½“å¤©, End=æ¬¡æ—¥

START_DATE=$1
END_DATE=$2

echo "=== AWS Cost Report ($START_DATE ~ $END_DATE) ==="

# Top 5 æœåŠ¡è´¹ç”¨
echo -e "\n--- Top 5 Services ---"
aws ce get-cost-and-usage \
  --time-period Start=$START_DATE,End=$END_DATE \
  --granularity=DAILY \
  --metrics "UnblendedCost" \
  --group-by Type=DIMENSION,Key=SERVICE \
  --query "ResultsByTime[0].Groups[*].{Service:Keys[0],Cost:Metrics.UnblendedCost.Amount}" \
  --output table | sort -k2 -nr | head -n 6

# Top 5 ç”¨é‡ç±»å‹
echo -e "\n--- Top 5 UsageTypes ---"
aws ce get-cost-and-usage \
  --time-period Start=$START_DATE,End=$END_DATE \
  --granularity=DAILY \
  --metrics "UnblendedCost" \
  --group-by Type=DIMENSION,Key=USAGE_TYPE \
  --query "ResultsByTime[0].Groups[*].{UsageType:Keys[0],Cost:Metrics.UnblendedCost.Amount}" \
  --output table | sort -k2 -nr | head -n 6

è¿è¡Œï¼ˆæ¯”å¦‚è¦æŸ¥ 2025-09-06 å‘¨å…­ çš„è´¹ç”¨ï¼‰ï¼š
./check_cost.sh 2025-09-06 2025-09-07